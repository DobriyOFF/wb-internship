(()=>{"use strict";const e=({timing:e,draw:t,duration:l})=>{let n=performance.now();requestAnimationFrame((function o(r){let d=(r-n)/l;d>1&&(d=1);let c=e(d);t(c),d<1&&requestAnimationFrame(o)}))};(()=>{const e=document.getElementById("paymentPermanent"),t=document.querySelector(".payment__permanent-label"),l=document.querySelector(".total__order-btn"),n=document.querySelector(".total-head-price"),o=document.querySelector(".basket__total-currency");t.addEventListener("click",(()=>{e.checked=!1!==e.checked,t.style.color="black",!1===e.checked?l.textContent="Оплатить "+n.textContent+" "+o.textContent:l.textContent="Заказать"}))})(),(()=>{const e=document.querySelectorAll(".recipient__hints"),t=document.querySelectorAll(".total__order-btn"),l=document.querySelector(".recipient__form-name"),n=document.querySelector(".recipient__form-surname"),o=document.querySelector(".recipient__form-email"),r=document.querySelector(".recipient__form-phone"),d=document.querySelector(".recipient__form-inn"),c=document.getElementById("nameError"),i=document.getElementById("surnameError"),s=document.getElementById("emailError"),a=document.getElementById("telError"),u=document.getElementById("innError"),m=document.querySelector(".payment__permanent-label"),h=document.getElementById("paymentPermanent"),y=document.querySelector(".recipient__hints-tel");t.forEach((e=>{e.addEventListener("click",(()=>{""===l.value&&""===n.value&&""===o.value&&""===d.value&&(c.style.display="inline-block",c.textContent="Укажите имя",l.style.color="#F55123",l.style.borderColor="#F55123",i.style.display="inline-block",i.textContent="Укажите фамилию",n.style.color="#F55123",n.style.borderColor="#F55123",s.style.display="inline-block",s.textContent="Укажите электронную почту",o.style.color="#F55123",o.style.borderColor="#F55123",a.style.display="inline-block",a.textContent="Укажите номер телефона",r.style.color="#F55123",r.style.borderColor="#F55123",u.style.display="inline-block",u.textContent="Укажите индекс",d.style.color="#F55123",d.style.borderColor="#F55123",h.checked||(m.style.color="#F55123"))}))}));let C=0;r.addEventListener("input",(e=>{let t=e.target;if((3===t.value.length||7===t.value.length||11===t.value.length||14===t.value.length)&&t.value.length>C){const e=t.value.charAt(t.value.length-1);t.value=t.value.slice(0,t.value.length-1),t.value+=" ",t.value+=e}" "===t.value.charAt(t.value.length-1)&&t.value.length<C&&(t.value=t.value.slice(0,t.value.length-1)),C=t.value.length})),e.forEach((e=>{e.addEventListener("mouseout",(()=>{e.firstElementChild.matches(".recipient__form-name")?/[^А-ЯЁа-яё\s\-]/.exec(e.firstElementChild.value)?(e.lastElementChild.style.display="inline-block",c.textContent=" ",e.firstElementChild.style.color="#F55123",e.firstElementChild.style.borderColor="#F55123"):(e.lastElementChild.style.display="none",e.firstElementChild.style.color="#A0A0A4",e.firstElementChild.style.borderColor="rgba(0, 0, 0, 0.2)"):e.firstElementChild.matches(".recipient__form-surname")?/[^А-ЯЁа-яё\s\-]/.exec(e.firstElementChild.value)?(e.lastElementChild.style.display="inline-block",i.textContent=" ",e.firstElementChild.style.color="#F55123",e.firstElementChild.style.borderColor="#F55123"):(e.lastElementChild.style.display="none",e.firstElementChild.style.color="#A0A0A4",e.firstElementChild.style.borderColor="rgba(0, 0, 0, 0.2)"):e.firstElementChild.matches(".recipient__form-email")?/[^\w\-@.!~*']/gi.exec(e.firstElementChild.value)?(e.lastElementChild.style.display="inline-block",s.textContent="Проверьте адрес электронной почты",e.firstElementChild.style.color="#F55123",e.firstElementChild.style.borderColor="#F55123"):(e.lastElementChild.style.display="none",e.firstElementChild.style.color="#A0A0A4",e.firstElementChild.style.borderColor="rgba(0, 0, 0, 0.2)"):e.firstElementChild.matches(".recipient__form-phone")?/^[\+]\d{1}[- ]?[\(]?\d{3}[\)]?[- ]?\d{3}[\- ]?\d{2}[\- ]?\d{2}$/.exec(e.firstElementChild.value)?(e.lastElementChild.style.display="none",y.style.display="inline-block",e.firstElementChild.style.color="#A0A0A4",e.firstElementChild.style.borderColor="rgba(0, 0, 0, 0.2)"):(e.lastElementChild.style.display="inline-block",y.style.display="none",e.lastElementChild.textContent="Формат: +9 999 999 99 99",e.firstElementChild.style.color="#F55123",e.firstElementChild.style.borderColor="#F55123"):e.firstElementChild.matches(".recipient__form-inn")&&(/[^\d\(\)\-]/gi.exec(e.firstElementChild.value)?(e.lastElementChild.style.display="inline-block",e.lastElementChild.textContent="Формат: 1234567",e.lastElementChild.style.color="#F55123",e.firstElementChild.style.color="#F55123",e.firstElementChild.style.borderColor="#F55123"):(e.lastElementChild.style.display="inline-block",e.lastElementChild.textContent="Для таможенного оформления",e.lastElementChild.style.color="black",e.firstElementChild.style.color="#A0A0A4",e.firstElementChild.style.borderColor="rgba(0, 0, 0, 0.2)"))}))}))})(),document.querySelectorAll(".item__product").forEach((e=>{let t,l,n,o,r,d,c,i,s,a,u,m,h,y;null!=e.children[3]&&(l=e.children[3].children[0].children[0]),null!=e.children[3]&&(n=e.children[3].children[0].children[1]),null!=e.children[3]&&(o=e.children[3].children[0].children[2]),null!=e.children[4]&&null!=e.children[4].children[0].children[0].textContent&&(r=e.children[4].children[0].children[0]),null!=e.children[4]&&null!=e.children[4].children[1].children[0].textContent&&(i=e.children[4].children[1].children[0]),null!=e.children[4]&&null!=e.children[4].children[0].children[0].textContent&&(a=e.children[4].children[2].children[0].children[1].children[0]),null!=e.children[4]&&null!=e.children[4].children[0].children[0].textContent&&(m=e.children[4].children[2].children[1].children[1].children[0]),null!=e.children[2]&&null!=e.children[2].children[0]&&null!=e.children[2].children[0].children[0]&&(y=e.children[2].children[0].children[0]),null!=e.children[3]&&(d=e.children[3].children[0].querySelector(".product__pieces-left")),null!=e.children[3]&&(c=e.children[3].children[0].querySelector(".product__pieces-left")),null!=r&&(t=Math.round(r.textContent/+l.value),s=Math.round(r.textContent/+l.value*.65),u=Math.round(r.textContent/+l.value*.55),h=Math.round(r.textContent/+l.value*.1),r.textContent=r.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),y.textContent=r.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),i.textContent=+l.value*s,i.textContent=i.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),a.textContent=+l.value*u,a.textContent=a.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),m.textContent=+l.value*h,m.textContent=m.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),c=null!=c?+l.value+ +c.textContent:300,o.addEventListener("click",(()=>{l.value<c&&(r.textContent=r.textContent.replace(/ /g,""),i.textContent=r.textContent.replace(/ /g,""),0==l.value?(r.textContent=t,y.textContent=t,i.textContent=s):(r.textContent=+r.textContent+ +t,i.textContent=s*(+l.value+1),i.textContent=i.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),a.textContent=u*(+l.value+1),a.textContent=a.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),m.textContent=h*(+l.value+1),m.textContent=m.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),r.textContent=r.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),y.textContent=r.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")),l.value=+l.value+1,null!=d&&(d.textContent-=1))})),n.addEventListener("click",(()=>{l.value>0&&(r.textContent=r.textContent.replace(/ /g,""),i.textContent=r.textContent.replace(/ /g,""),l.value=+l.value-1,l.value<1?(r.textContent="0",y.textContent="0",i.textContent="0"):(r.textContent=+r.textContent-t,r.textContent=r.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),y.textContent=r.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),i.textContent=+s*+l.value,i.textContent=i.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),a.textContent=+u*+l.value,a.textContent=a.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),m.textContent=+h*+l.value,m.textContent=m.textContent.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")),null!=d&&(d.textContent=+d.textContent+1))})))})),(()=>{const t=document.getElementById("totalPrice"),l=document.querySelectorAll(".product__wrapper"),n=document.querySelector(".total__item-price"),o=document.querySelectorAll(".product__price-desc-main"),r=document.getElementById("totalDiscount");function d(e,t){let l=function(){t(e)},n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(n)new n(l).observe(e,{childList:!0});else if(e.addEventListener)e.addEventListener("DOMNodeInserted",l,!1);else{let t=e.innerHTML;setInterval((function(){t!=e.innerHTML&&(t=e.innerHTML,l())}),300)}}let c=1;l.forEach((e=>{e.firstElementChild.id="count"+c,c++}));let i=()=>{let o,r,d=0;for(let e of l)d+=+e.firstElementChild.textContent.replace(/ /g,""),o=+d-+e.firstElementChild.textContent.replace(/ /g,"");d=String(d),t.textContent=d.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),n.textContent=t.textContent,r=Number(t.textContent.replace(/ /g,"")),e({duration:400,timing:e=>e,draw(e){t.textContent=(o+Math.round((r-o)*e)).toLocaleString()}}),e({duration:400,timing:e=>e,draw(e){n.textContent=(o+Math.round((r-o)*e)).toLocaleString()}})},s=()=>{let t,l,n=0;for(let e of o)n+=+e.textContent.replace(/ /g,"").match(/\d+/),t=+n-+e.textContent.replace(/ /g,"").match(/\d+/);n=String(n),r.textContent=n.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 "),l=Number(r.textContent.replace(/ /g,"")),e({duration:400,timing:e=>e,draw(e){r.textContent="-"+(t+Math.round((l-t)*e)).toLocaleString()}})};for(let e of l)d(document.getElementById(e.firstElementChild.id),(function(e){i(),s()}));i(),s()})(),(()=>{let e=document.querySelectorAll(".basket__label-checkbox"),t=document.querySelector(".basket__header-checkbox");document.querySelectorAll(".basket__btn-wrapper");const l=document.querySelectorAll(".basket__btn"),n=document.getElementById("basketListFirst"),o=document.getElementById("basketBtnFirst"),r=document.getElementById("basketListSecond"),d=document.getElementById("basketBtnSecond");let c=e.length,i=0;e.forEach((l=>{l.addEventListener("click",(()=>{for(l of e)!0===l.checked&&(i+=1);t.checked=!0===l.checked&&i===c,i=0}))})),t.addEventListener("click",(()=>{e.forEach((e=>{e.checked=!0===t.checked}))})),l.forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("active")}))})),o.addEventListener("click",(()=>{n.classList.toggle("disable")})),d.addEventListener("click",(()=>{r.classList.toggle("disable")}))})(),(()=>{let e=document.querySelectorAll(".basket__item"),t=document.querySelectorAll(".missing__item"),l=(document.querySelector(".missing__basket-col"),document.querySelectorAll(".basket__label"));const n=document.querySelector(".ui__basket-amount"),o=document.querySelector(".total__item-desc");let r=l.length;o.textContent=r,e.forEach((e=>{void 0!==e.childNodes[3]&&e.childNodes[3].childNodes[1].childNodes[7].childNodes[3].childNodes[3].addEventListener("click",(()=>{r-=1,o.textContent-=1,n.textContent=r,e.remove()}))})),t.forEach((e=>{e.childNodes[1].childNodes[5].childNodes[1].childNodes[3].addEventListener("click",(()=>{e.remove()}))}))})(),(()=>{const e=document.querySelectorAll(".info__free"),t=document.querySelectorAll(".tooltip__delivery-info"),l=document.querySelectorAll(".basket__item"),n=document.querySelectorAll(".product__price");e.forEach((e=>{t.forEach((t=>{e.addEventListener("mouseover",(()=>{t.style.display="inline-block"})),e.addEventListener("mouseout",(()=>{t.style.display="none"}))}))})),l.forEach((e=>{if(void 0!==e.childNodes[3]){let t=e.childNodes[3].childNodes[1].childNodes[5].childNodes[9].childNodes[1];t.addEventListener("mouseover",(()=>{e.childNodes[3].childNodes[1].childNodes[5].childNodes[11].style.display="inline-block"})),t.addEventListener("mouseout",(()=>{e.childNodes[3].childNodes[1].childNodes[5].childNodes[11].style.display="none"}))}})),n.forEach((e=>{if(void 0!==e.childNodes[3]){let t=e.childNodes[3];t.addEventListener("mouseover",(()=>{e.childNodes[5].style.display="flex"})),t.addEventListener("mouseout",(()=>{e.childNodes[5].style.display="none"}))}}))})(),(()=>{const e=document.querySelector(".modal__overlay"),t=document.querySelector(".modal__callback"),l=document.querySelector(".modal__overlay-delivery"),n=document.querySelector(".modal__callback-delivery"),o=document.querySelectorAll(".modal__main-wrapper");document.addEventListener("click",(l=>(l=>{(l.target.closest(".paymet__method-btn")||l.target.closest(".total__payment-btn-svg"))&&(l.preventDefault(),t.style.display="block",e.style.display="block"),(l.target.closest(".modal__close-svg")||l.target.closest(".modal__overlay")||l.target.closest(".modal__footer-btn"))&&(t.style.display="none",e.style.display="none")})(l))),document.addEventListener("click",(e=>(e=>{(e.target.closest(".delivery__method-btn")||e.target.closest(".total__delivery-btn-svg"))&&(e.preventDefault(),n.style.display="block",l.style.display="block"),(e.target.closest(".modal__close-svg")||e.target.closest(".modal__overlay-delivery")||e.target.closest(".modal__footer-btn"))&&(n.style.display="none",l.style.display="none")})(e))),o.forEach((e=>{e.lastElementChild.matches(".delivery__form-label")&&e.lastElementChild.lastElementChild.addEventListener("click",(()=>{e.remove()}))}))})(),(()=>{const e=document.querySelector(".recipient__form-name"),t=document.querySelector(".recipient__form-surname"),l=document.querySelector(".recipient__form-email"),n=document.querySelector(".recipient__form-phone"),o=document.querySelector(".recipient__form-inn"),r=document.getElementById("agreeMount"),d=document.querySelector(".recipient__hints-tel");document.addEventListener("click",(c=>(c=>{if((c.target.closest(".total__order-btn")||c.target.closest(".footer__menu"))&&c.target.matches("button")){c.preventDefault();const i=c.target.getAttribute("href");""!==e.value&&""!==t.value&&""!==l.value&&""!==n.value&&""!==o.value&&r.checked||(d.style.display="none",document.querySelector(i).scrollIntoView({behavior:"smooth",block:"start"}))}})(c)))})()})();